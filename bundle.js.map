{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;AAAgD;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA,uBAAuB,mDAAQ;AAC/B;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,qDAAU;AACtB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA,aAAa,qDAAU;AACvB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;;;;;;;;;;;;;;;;ACtGqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,0DAAe;AACzC;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8DAA8D,oGAAoG;AAClK;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0DAA0D,oBAAoB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,sBAAsB,mDAAQ;AAC9B;AACA;AACA;AACA,KAAK;;AAEL;AACA;;;;;;;;;;;;;;;;;;ACtIO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;;;;;;UC5BA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;ACNiB;AACC;AACA;AACF","sources":["webpack://catenergy/./js/header.js","webpack://catenergy/./js/slider.js","webpack://catenergy/./js/utils.js","webpack://catenergy/./js/ymap.js","webpack://catenergy/webpack/bootstrap","webpack://catenergy/webpack/runtime/compat get default export","webpack://catenergy/webpack/runtime/define property getters","webpack://catenergy/webpack/runtime/hasOwnProperty shorthand","webpack://catenergy/webpack/runtime/make namespace object","webpack://catenergy/./js/index.js"],"sourcesContent":["import {debounce, isScrolled} from \"./utils.js\";\n\n// Получаем ссылки на DOM-элементы\nconst header = document.querySelector('.header');\nconst button = document.querySelector('.header__button');\nconst cross = document.getElementById('cross');\nconst menu = document.getElementById('menu');\nconst nav = document.querySelector('.menu');\nconst navList = document.querySelector('.menu__list');\nconst navLinks = document.querySelectorAll('.menu__link');\nconst menuOverlay = document.querySelector('.menu-overlay');\ndocument.addEventListener('keydown', onEscPress);\n\nfunction closeHeaderMenu() {\n    menu.classList.remove('header__icon--invisible');\n    cross.classList.add('header__icon--invisible');\n    nav.classList.add('menu--closed');\n    menuOverlay.classList.remove('menu-overlay--open');\n}\n\nfunction onEscPress(evt) {\n    if (evt.keyCode === 27) {\n        closeHeaderMenu();\n    }\n}\n\n// Открываем/закрываем меню-бургер\nbutton.addEventListener('click', () => {\n    menu.classList.toggle('header__icon--invisible');\n    cross.classList.toggle('header__icon--invisible');\n    nav.classList.toggle('menu--closed');\n    menuOverlay.classList.toggle('menu-overlay--open');\n});\n\n\n// Закрываем меню-бургер при переключении в режимы планшета или десктопа\nconst hideMobileMenu = debounce(function () {\n    if (window.innerWidth >= 748) {\n        closeHeaderMenu();\n    }\n}, 600);\nwindow.addEventListener('resize', hideMobileMenu);\n\n// Меняем стили header при скролле\nconst setHeaderTransparency = method => {\n    header.classList[method]('header--transparent');\n}\n\nconst restyleHeader = () => {\n    const page = document.querySelector('.page');\n        if (isScrolled()) {\n            if (page.dataset.page === 'index') {\n                setHeaderTransparency('remove');\n                navList.classList.add('menu__list--modified');\n                navLinks.forEach(el => {\n                    el.classList.add('menu__link--modified');\n                });\n            }\n            header.classList.add('header--page-scrolled');\n\n        }\n        if (!isScrolled()) {\n            if (page.dataset.page === 'index') {\n                setHeaderTransparency('add');\n                navList.classList.remove('menu__list--modified');\n                navLinks.forEach(el => {\n                    el.classList.remove('menu__link--modified');\n                });\n            }\n            header.classList.remove('header--page-scrolled');\n        }\n}\nrestyleHeader();\n\nwindow.addEventListener('scroll', restyleHeader);\n\n// Прячем/показываем header при скроллах вверх-вниз - тиснуто отсюда: https://frontips.ru/skryvaem-pokazyvaem-header-pri-prokrutke/\nconst onScrollHeader = () => {\n\n    let prevScroll = window.pageYOffset;\n    let currentScroll;\n\n    window.addEventListener('scroll', ()=> {\n        currentScroll = window.pageYOffset;\n        const isHeaderHidden = () => header.classList.contains('header--hidden');\n        if (currentScroll > prevScroll && !isHeaderHidden() && currentScroll > 80) {\n            // скролл > 80 нужен, чтобы не спешить прятать header в самом верху страницы\n            header.classList.add('header--hidden');\n            closeHeaderMenu();\n        }\n        if (currentScroll < prevScroll && isHeaderHidden()) {\n            header.classList.remove('header--hidden');\n        }\n        if (currentScroll < prevScroll && !menu.classList.contains('menu--closed')) {\n            closeHeaderMenu();\n        }\n        prevScroll = currentScroll;\n    })\n}\n\nonScrollHeader();\n\nmenuOverlay.addEventListener('click', closeHeaderMenu);\n\n\n","import {debounce, checkTouchEvent} from \"./utils.js\";\n\nconst slider = document.querySelector('.slider');\nif (slider) {\n    const SLIDER_TABLET_WIDTH = 690;\n    const input = document.getElementById('fat-cat-slim');\n    const line = slider.querySelector('.slider__line');\n    const pin = slider.querySelector('.slider__pin');\n    const catsContainer = slider.querySelector('.slider__cats');\n    const fatCatPic = slider.querySelector('.slider__pic-before');\n    const slimCatImg = slider.querySelector('.slider__img-after');\n    const beforeBtn = document.getElementById('before-btn');\n    const afterBtn = document.getElementById('after-btn');\n\n    function setSmoothMode(method) {\n        pin.classList[method]('slider__pin--smooth');\n        fatCatPic.classList[method]('slider__pic-before--smooth');\n        slimCatImg.classList[method]('slider__img-after--smooth');\n    }\n\n    function movePinHandler(evt) {\n        setSmoothMode('remove');\n        const moveEvent = checkTouchEvent(evt);\n        if (window.innerWidth >= 748) {\n            /**\n             * Находим расстояние от курсора до левой границы элемента.\n             * @param el Элемент\n             * @returns {number} px\n             */\n            function getLeftBorderDistance(el) {\n                return moveEvent.clientX - el.getBoundingClientRect().left;\n            }\n\n            let pinPosition = getLeftBorderDistance(line);\n            let pinProgress = Math.round(pinPosition / line.clientWidth * 100);\n\n            if (pinProgress < 0) {\n                pinProgress = 0;\n            }\n            if (pinProgress > 100) {\n                pinProgress = 100;\n            }\n\n            pin.style.left = pinProgress + '%';\n            input.setAttribute('value', pinProgress.toString());\n\n            fatCatPic.style.width = Math.min(getLeftBorderDistance(slider),SLIDER_TABLET_WIDTH) + 'px';\n            slimCatImg.style.clip = `rect(auto, auto, auto, ${Math.min(getLeftBorderDistance(slider) < 0 ? 0 : getLeftBorderDistance(slider),SLIDER_TABLET_WIDTH)}px)`;\n        }\n    }\n\n    function showBefore() {\n        pin.style.left = '100%';\n        pin.classList.remove('slider__pin--after');\n        input.setAttribute('value', '100');\n        fatCatPic.style.width = '100%';\n        slimCatImg.style.clip = `rect(auto, auto, auto, ${SLIDER_TABLET_WIDTH}px)`;\n        slider.dataset.state = '0';\n    }\n    function showAfter() {\n        pin.style.left = '0';\n        pin.classList.add('slider__pin--after');\n        input.setAttribute('value', '0');\n        fatCatPic.style.width = '0%';\n        slimCatImg.style.clip = `rect(auto, auto, auto, 0px)`;\n        slider.dataset.state = '1';\n    }\n\n    /**\n     * Переключаем котов ДО и ПОСЛЕ в зависимости от data-state формы слайдера\n     */\n    function toggleCats() {\n        if (window.innerWidth < 748) {\n            if (slider.dataset.state === '0') {\n                showAfter();\n                return;\n            }\n            if (slider.dataset.state === '1') {\n                showBefore();\n            }\n        }\n    }\n    catsContainer.addEventListener('touchstart', toggleCats);\n    catsContainer.addEventListener('mousedown', toggleCats);\n// Кнопки ДО и ПОСЛЕ\n    function showState(evt) {\n        if (evt.target.getAttribute('id') === 'before-btn') {\n            showBefore();\n        } else {\n            showAfter();\n        }\n    }\n\n    beforeBtn.addEventListener('click', showState);\n    afterBtn.addEventListener('click', showState);\n\n\n\n// Отслеживаем смещение слайдера касанием\n    pin.addEventListener('touchstart', () => {\n        document.addEventListener('touchmove', movePinHandler);\n        document.addEventListener('touchend', () => {\n            document.removeEventListener('touchmove', movePinHandler);\n            setSmoothMode('add');\n            if (input.value < 50) {\n                showAfter();\n            } else if (input.value > 50) {\n                showBefore();\n            }\n        });\n    });\n\n// Отслеживаем смещение слайдера мышью\n    pin.addEventListener('mousedown', () => {\n        document.addEventListener('mousemove', movePinHandler);\n        document.addEventListener('mouseup', () => {\n            document.removeEventListener('mousemove', movePinHandler);\n            setSmoothMode('add');\n            if (input.value < 50) {\n                showAfter();\n            } else if (input.value > 50) {\n                showBefore();\n            }\n        });\n    });\n\n// // Мобильная версия. При переходе в моб. версию первым делом включаем слайд жирного кота\n    const setFatCat = debounce(function () {\n        if (window.innerWidth < 748) {\n            showBefore();\n        }\n    }, 600);\n\n    window.addEventListener('resize', setFatCat);\n}\n","export function debounce(func, wait, immediate) {\n    let timeout;\n    return function executedFunction() {\n        const context = this;\n        const args = arguments;\n        const later = function() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        const callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n    };\n}\n\nexport function isScrolled() {\n    return document.documentElement.scrollTop > 0;\n}\n\nexport function checkTouchEvent(event) {\n    if (event.changedTouches) {\n        return event.changedTouches[0];\n    }\n        return event;\n}\n\n","// Яндекс карта\nconst ymap = document.getElementById(`map`)\n\nif (ymap) {\n    function init() {\n        const myMap = new ymaps.Map(\n            `map`, {\n                center: [59.938818, 30.323139],\n                zoom: 17,\n            }, {\n                searchControlProvider: `yandex#search`\n            }\n        );\n\n        myMap.behaviors.disable('scrollZoom');\n\n        let myPlacemark = new ymaps.Placemark([59.938818, 30.323139], {\n            hintContent: 'Cat Energy',\n        }, {\n            iconLayout: 'default#image',\n            iconImageHref: 'img/map-pin.svg',\n            iconImageSize: [57, 53]\n        });\n\n        myMap.geoObjects.add(myPlacemark);\n    }\n\n    ymaps.ready(init)\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './utils';\nimport './header';\nimport './slider';\nimport './ymap';\n"],"names":[],"sourceRoot":""}